<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Tratamientos</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="extensions/filter-control/bootstrap-table-filter-control.css">
<script src="extensions/filter-control/bootstrap-table-filter-control.js"></script>
<link rel="stylesheet" type="text/css" th:href="@{/css/estilos.css}"/>

</head>
<body>
	<div class="container-fluid">
	<ul class="nav nav-pills" >
	  <li role="presentation" class="active"><a href="/tratamientos">Tratamientos</a></li>
	  <li role="presentation"><a href="/cultivos">Cultivos</a></li>
	  <li role="presentation"><a href="/productosFitosanitarios">Productos Fitosanitarios</a></li>
	  <form class="navbar-form navbar-left" role="search" th:action="@{/tratamientosEnVigor}">
		  <div class="form-group">
		    <input type="text" class="form-control" onBlur="(this.type='text')" onFocus="(this.type='date')" placeholder="Consulta por plazos de seguridad en vigor" id="consulta" name="fechaIntroducida">
		  </div>
		  <button type="submit" class="btn btn-default">Consultar</button>
		</form>
	 </ul>
	
	<div class="page-header">
	  <h1>Tus tratamientos</h1>
	</div>
	<p th:text="'En esta página te mostraremos los tratamientos que aún están en vigor a fecha de ' + ${fechaIntroducida}">

	</p>
	
	<a href="/insertarTratamiento">Insertar Nuevo Tratamiento</a>
	
		<table class="table table-striped table-bordered table-hover">
			<form action="/tratamientos">
		        <thead>
		        	<tr class="filters">
                        <th>
                        	<div id="columna">
                        	<div class="col-sm-8">
                       			<b> Tratamiento </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=AI,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DI,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>    
                        	</div>                       		                	
                        </th>
                        <th class="col-xs">
                       		<div class="col-sm-8">
                       			<b> Cultivo </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=AC,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DC,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>                    	
                        </th>
                        <th class="col-xs">
                       		<div class="col-sm-8">
                       			<b> Producto </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=AP,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DP,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>                    	
                        </th>
                        <th class="col-xs">
                       		<div class="col-sm-8">
                       			<b> Número de lote </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=ANL,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DNL,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>                    	
                        </th>
                        <th class="col-xs">
                       		<div class="col-sm-8">
                       			<b> Fecha de tratamiento </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=AFT,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DFT,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>                    	
                        </th>
                        <th class="col-xs">
                       		<div class="col-sm-8">
                       			<b> Fin Plazo Recolección </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=APRec,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DPRec,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>                    	
                        </th>
                        <th class="col-xs">
                       		<div class="col-sm-8">
                       			<b> Fin Plazo Reentrada </b>
                       		</div>
                       		<div class="col-sm-2">
                       			<a th:href="@{/tratamientosEnVigor(por=APRee,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/up.png}"/></a>
                                <a th:href="@{/tratamientosEnVigor(por=DPRee,fechaIntroducida=${fechaIntroducida})}"><img th:src="@{assets/img/down.png}"/></a>
                       		</div>                    	
                        </th>
                        
							
	                    </tr>
		        	</thead>
	        	</form>
	        <tbody>
	            <tr th:each=" tratamiento:${tratamientos}">
	                <td><a th:text="${tratamiento.idTratamiento}" th:href="@{/modificarTratamiento(id=${tratamiento.idTratamiento})}"></a></td>
	                <td><p th:text="${tratamiento.cultivo.especie}"></p></td>
	                <td><p th:text="${tratamiento.producto.nombre}"></p></td>
	                <td><p th:text="${tratamiento.numeroLote}"></p></td>
	                <td><p th:text="${tratamiento.fechaTratamiento}"></p></td>
	                <td><p th:text="${tratamiento.finPlazoReentrada}"></p></td>
	                <td><p th:text="${tratamiento.finPlazoRecoleccion}"></p></td>
	                <td>
	                	<a th:href="@{/modificarTratamiento(id=${tratamiento.idTratamiento})}" class="btn btn-default btn-lg">
	                		<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
	                	</a>
	                </td>
	            </tr>            
	        </tbody>
	        <tfoot>
	            <tr>
	                <th>Tramiento</th>
	                <th>Cultivo</th>
	                <th>Producto</th>
	                <th>Numero de Lote</th>
	                <th>Fecha de tratamiento</th>
	                <th>Plazo de reentrada</th>
	                <th>Plazo de recolección</th>
	            </tr>
	        </tfoot>
	    </table>
	</div>
</body>
</html>